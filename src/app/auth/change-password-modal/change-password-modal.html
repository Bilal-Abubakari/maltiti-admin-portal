<p-dialog
  header="Change Password"
  styleClass="change-password-dialog"
  [closable]="false"
  [draggable]="false"
  [modal]="true"
  [resizable]="false"
  [visible]="showChangePasswordModal()"
>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="field">
      <app-password-input
        id="currentPassword"
        label="Current Password"
        placeholder="Enter current password"
        styleClass="w-full"
        [control]="form.controls.currentPassword"
        [feedback]="false"
        [toggleMask]="true"
      />
    </div>

    <div class="field">
      <app-password-input
        id="newPassword"
        label="New Password"
        placeholder="Enter new password"
        styleClass="w-full"
        [control]="form.controls.newPassword"
        [feedback]="false"
        [toggleMask]="true"
      />
    </div>

    <div class="field">
      <app-password-input
        id="confirmPassword"
        label="Confirm Password"
        placeholder="Confirm new password"
        styleClass="w-full"
        [control]="form.controls.confirmPassword"
        [feedback]="false"
        [toggleMask]="true"
      />
      @if (form.hasError('mismatch')) {
        <small class="p-error">Passwords do not match.</small>
      }
    </div>

    <div class="change-password-actions">
      <p-button
        label="Change Password"
        type="submit"
        [disabled]="form.invalid"
        [loading]="loading()"
      />
    </div>
  </form>
</p-dialog>
