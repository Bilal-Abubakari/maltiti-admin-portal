<div class="login-container">
  <div class="login-wrapper">
    <p-card class="login-card">
      <ng-template pTemplate="header">
        <div class="login-header">
          <h1 class="login-title">Maltiti A. Enterprise</h1>
          <p class="login-subtitle">Admin Portal</p>
        </div>
      </ng-template>

      @if (error(); as error) {
        <p-message severity="error" styleClass="w-full mb-3">
          {{error}}
        </p-message>
      }

      <form class="login-form" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="form-field">
          <p-floatlabel>
            <input
              class="w-full"
              formControlName="email"
              id="email"
              pInputText
              type="email"
              [class.ng-dirty]="emailControl.touched"
              [class.ng-invalid]="emailControl.invalid && emailControl.touched"
            />
            <label for="email">Email</label>
          </p-floatlabel>
          @if (emailControl.invalid && emailControl.touched) {
            <small class="error-text">
              @if (emailControl.hasError('required')) {
                Email is required
              }
              @if (emailControl.hasError('email')) {
                Please enter a valid email
              }
            </small>
          }
        </div>

        <div class="form-field">
          <p-floatlabel>
            <p-password
              class="w-full"
              formControlName="password"
              inputId="password"
              [feedback]="false"
              [inputStyleClass]="(passwordControl.invalid && passwordControl.touched) ? 'ng-invalid ng-dirty' : ''"
              [toggleMask]="true"
            />
            <label for="password">Password</label>
          </p-floatlabel>
          @if (passwordControl.invalid && passwordControl.touched) {
            <small class="error-text">
              @if (passwordControl.hasError('required')) {
                Password is required
              }
              @if (passwordControl.hasError('minlength')) {
                Password must be at least 6 characters
              }
            </small>
          }
        </div>

        <p-button
          icon="pi pi-sign-in"
          label="Login"
          styleClass="w-full"
          type="submit"
          [disabled]="loginForm.invalid"
          [loading]="loading()"
        />
      </form>
    </p-card>
  </div>
</div>

